---
title: Export telemetry to Grafana Cloud
sidebar:
  order: 3
---

import GrafanaUrlGenerator from '@components/GrafanaUrlGenerator.astro';
import GrafanaResourceGenerator from '@components/GrafanaResourceGenerator.astro';

This tutorial shows you how to export metrics from your Datum platform to
Grafana Cloud using an ExportPolicy and Secret.

## Before you begin

This tutorial assumes you have already:

- [Registered a Datum account](/docs/get-started/)
- [Installed and configured the necessary tools](/docs/tasks/tools/)
- [Created a Datum project](/docs/tasks/create-project/)
- [Configured a kubeconfig context for your project](/docs/tasks/create-project#add-a-kubeconfig-context-for-your-project/)
- A Grafana Cloud account with an active instance

## Overview

You will configure metric export by:

1. Accessing your Grafana Cloud instance
2. Generating Prometheus remote write configuration
3. Creating Datum Secret and ExportPolicy resources

The process extracts connection details from Grafana Cloud's generated
configuration and creates the necessary Datum resources automatically.

## Step 1: Access your Grafana Cloud instance

If you don't have a Grafana Cloud account,
<a href="https://grafana.com/" target="_blank">create one at grafana.com</a>.

1. Sign in to <a href="https://grafana.com/auth/sign-up/" target="_blank">Grafana Cloud</a>
2. Navigate to your desired instance
3. Copy your instance URL (for example: `https://play.grafana.net`)

## Step 2: Generate connection URL

Use this form to generate the Grafana Cloud connection URL:

<GrafanaUrlGenerator />

## Step 3: Get Prometheus configuration

1. Click the generated connection URL above
2. Choose whether to create a new API token or use an existing one
3. Complete the form and submit it
4. Copy the generated Prometheus configuration YAML

The configuration looks similar to this:

```yaml
remote_write:
  - url: https://prometheus-prod-56-prod-us-east-2.grafana.net/api/prom/push
    basic_auth:
      username: 123456
      password: glc_eyJvIjoiNzA2...
```

## Step 4: Generate and apply Datum resources

Paste your Prometheus configuration below to generate the Secret and
ExportPolicy. Use the tabs to choose between applying from stdin or saving to
files:

<GrafanaResourceGenerator />

## Step 5: Verify the configuration

Check that your resources were created successfully using the names you specified:

**Verify the Secret:**

```shell
kubectl get secret grafana-cloud-credentials
```

**Verify the ExportPolicy:**

```shell
kubectl get exportpolicy export-datum-telemetry
```

## Step 6: View metrics in Grafana Cloud

1. Return to your Grafana Cloud instance
2. Navigate to **Explore** in the left sidebar
3. Select your Prometheus data source
4. Run a query like `{service_name="telemetry.miloapis.com"}` to see your metrics

## Troubleshooting

If you encounter issues:

1. **Check Secret encoding**: Ensure username and password are correctly base64
   encoded
2. **Verify endpoint URL**: Confirm the Prometheus remote write endpoint is
   accessible
3. **Review ExportPolicy**: Check that the `metricsql` selector matches your
   services
4. **Check authentication**: Verify your API token has write permissions for
   Prometheus

For additional help, consult the [Grafana Cloud documentation](https://grafana.com/docs/grafana-cloud/).
